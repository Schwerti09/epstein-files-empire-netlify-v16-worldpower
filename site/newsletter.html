<!doctype html>
<html lang="de">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width,initial-scale=1">
  <title>Briefing â€“ Wissensâ€‘Bank</title>
  <meta name="description" content="Daily Briefing: Trending Names + neue EintrÃ¤ge. Double optâ€‘in.">
  <link rel="stylesheet" href="/styles.css">
</head>
<body>
<div class="topbar">
  <div class="container">
    <div class="row">
      <div class="badge"><span class="dot"></span><strong>Live</strong> Â· <span id="today"></span></div>
      <div class="badge">Status: <span id="authState">Gast</span> Â· <a href="#" id="logoutBtn" style="display:none">Logout</a></div>
    </div>
  </div>
</div>

<div class="masthead">
  <div class="container">
    <div class="inner">
      <div class="logo">
        WISSENSâ€‘BANK
        <small>Daily Briefing Â· Trending Names + neue EintrÃ¤ge (ohne Spam)</small>
      </div>
      <div class="actions">
        <a class="btn" href="/pricing.html">Preise</a>
        <a class="btn primary" href="#" data-subscribe data-plan="day">Premium</a>
      </div>
    </div>
  </div>
</div>

<div class="nav">
  <div class="container">
    <div class="row">
      <a href="/">Start</a>
      <a href="/search.html">Suche</a>
      <a href="/names.html">Namenâ€‘Index</a>
      <a href="/alerts.html">Alerts</a>
      <a href="/pricing.html">Preise</a>
      <a href="/newsletter.html" class="active">Briefing</a>
      <a href="/about.html">Methode</a>
      <a href="/account.html">Account</a>
    </div>
  </div>
</div>

<main class="container" style="margin-top:16px">
  <div class="grid" style="grid-template-columns:1.2fr .8fr;gap:14px">
    <div class="card pad">
      <div class="kicker">Briefing</div>
      <div class="h1">1 Mail pro Tag. Keine Panik. Kein Bullshit.</div>
      <div class="p muted">Du bekommst: Trending Names (basierend auf echten Seitenaufrufen) + 10 neue EintrÃ¤ge. Double optâ€‘in. Abmeldung 1â€‘Klick.</div>

      <div class="notice" id="statusBox" style="display:none"></div>

      <form id="subForm" style="margin-top:12px;display:flex;gap:10px;align-items:center;flex-wrap:wrap">
        <input id="email" type="email" placeholder="dein@email.de" class="input" style="flex:1;min-width:220px" required />
        <button class="btn danger" type="submit">Briefing aktivieren</button>
      </form>

      <div class="p small muted" style="margin-top:10px">
        Wenn du keine Eâ€‘Mail erhalten kannst/willst: Premium zeigt dir Trending direkt auf der Startseite.
      </div>
    </div>

    <aside class="card pad">
      <div class="kicker">Vertrauen</div>
      <div class="h2">Privacyâ€‘Rules</div>
      <ul class="p">
        <li>Wir zeigen Socialâ€‘Proof erst ab Mindestâ€‘Volumen (Schwelle).</li>
        <li>Keine personenbezogenen Daten im Tracking.</li>
        <li>Du kannst jederzeit abmelden.</li>
      </ul>
      <hr>
      <div class="h2">Proâ€‘Tipp</div>
      <div class="p muted">FÃ¼r maximale Zustellrate: SPF/DKIM in deinem Domainâ€‘DNS einrichten (steht in der Hostingâ€‘Doku deines Mailâ€‘Providers).</div>
    </aside>
  </div>
</main>

<footer class="footer">
  <div class="container">
    <div class="row">
      <div>Â© <span id="year"></span> Wissensâ€‘Bank.</div>
      <div style="display:flex;gap:12px;flex-wrap:wrap">
        <a href="/impressum.html">Impressum</a>
        <a href="/datenschutz.html">Datenschutz</a>
        <a href="/agb.html">AGB</a>
      </div>
    </div>
  </div>
</footer>

<script type="module">
  import { apiPost, getToken, clearToken } from "/js/api.js";

  document.getElementById("today").textContent = new Date().toLocaleDateString("de-DE",{weekday:"long",year:"numeric",month:"long",day:"2-digit"});
  document.getElementById("year").textContent = new Date().getFullYear();

  const qs = new URLSearchParams(location.search);
  const status = qs.get("status");
  const sb = document.getElementById("statusBox");
  if (status) {
    sb.style.display = "block";
    sb.textContent = status === "confirmed"
      ? "âœ… BestÃ¤tigt. Briefing ist aktiv."
      : status === "unsubscribed"
        ? "ðŸ«¡ Abgemeldet. Kein Briefing mehr."
        : "âš ï¸ Link ungÃ¼ltig oder abgelaufen.";
  }

  const t = getToken();
  const st = document.getElementById("authState");
  const lo = document.getElementById("logoutBtn");
  if (st) st.textContent = t ? "Premium aktiv" : "Gast";
  if (lo) {
    lo.style.display = t ? "inline-flex" : "none";
    lo.addEventListener("click", (e)=>{ e.preventDefault(); clearToken(); location.reload(); });
  }

  document.querySelectorAll("[data-subscribe data-plan="day"]").forEach(btn=>{
    btn.addEventListener("click", async (e)=>{
      e.preventDefault();
      const out = await apiPost("/api/checkout", { plan: "monthly" });
      if (out?.url) location.href = out.url;
      alert(out?.error || "Checkout fehlgeschlagen");
    });
  });

  document.getElementById("subForm").addEventListener("submit", async (e)=>{
    e.preventDefault();
    const email = document.getElementById("email").value.trim();
    const out = await apiPost("/api/subscribe", { email });
    if (out?.success) {
      sb.style.display = "block";
      sb.textContent = out?.sent ? "âœ… Check deine Inbox (BestÃ¤tigung)."
        : `âœ… Devâ€‘Modus: Ã–ffne diesen Link zum BestÃ¤tigen: ${out.confirmUrl}`;
      return;
    }
    sb.style.display = "block";
    sb.textContent = out?.error || "Fehler.";
  });
</script>


<!-- Deployed with Zip-Ship -->
<div id="zipship-badge" style="position:fixed;bottom:12px;right:12px;z-index:9999;font-family:system-ui,sans-serif;font-size:12px;">
  <a href="https://zip-ship-revolution.com/?utm_source=user_site" target="_blank" rel="noopener" 
     style="display:flex;align-items:center;gap:6px;padding:6px 12px;background:rgba(10,14,39,0.85);color:#00F0FF;text-decoration:none;border-radius:6px;border:1px solid rgba(0,240,255,0.3);backdrop-filter:blur(8px);transition:all 0.2s;">
    <span style="font-size:14px;">âš¡</span>
    <span>Deployed with Zip-Ship</span>
  </a>
</div>
</body>
</html>
